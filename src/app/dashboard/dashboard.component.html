<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
  <!-- Brand/logo -->
  <a class="navbar-brand" href="#">
    <h3>Open Source Social Networking</h3>
  </a>

  <div style="float: right;">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" (click)="logout()" style="cursor: pointer;"><b>Logout</b></a>
      </li>
    </ul>
  </div>
  <!-- Links -->

</nav>

<div class="container-fluid">
  <h4>Welcome {{user.name}}</h4>
</div>

<!-- <div class="container-fluid">
  <h5>Your Friend List</h5>
  <div class="row">
    <div class="col-sm-3">
      <ul class="list-group">
        <li *ngFor="let friend of friends" class="list-group-item d-flex justify-content-between align-items-center">
          {{friend.name}}
          <div><i class="fa fa fa-wechat" (click)="connectTextChat(friend.userId)" style="cursor: pointer;"></i> &nbsp;
            <i class="fa fa-video-camera" style="cursor: pointer;"></i></div>

          <span class="badge badge-success badge-pill">&nbsp;</span>
        </li>
      </ul>
    </div>

    <div class="col-sm-9">

    </div>
  </div>

</div> -->


<div class="container-fluid">
  <div class="messaging">
    <div class="inbox_msg">
      <div class="inbox_people">
        <div class="headind_srch">
          <div class="recent_heading">
            <h5>Peer to Peer Chat</h5>
          </div>
          <!-- <div class="srch_bar">
            <div class="stylish-input-group">
              <input type="text" class="search-bar" placeholder="Search">
              <span class="input-group-addon">
                <button type="button"> <i class="fa fa-search" aria-hidden="true"></i> </button>
              </span> </div>
          </div> -->
        </div>
        <!-- *ngIf="friend?.online" -->
        <div class="inbox_chat">
          <div class="chat_list active_chat" *ngFor="let friend of friends">
            <div class="chat_people">
              <div class="chat_img"> <img src="https://ptetutorials.com/images/user-profile.png" alt="sunil"> </div>
              <div class="chat_ib">
                <h5>{{friend.name}} &nbsp;&nbsp;<i *ngIf="peer" [ngStyle]="{'display': friend?.online ? 'inline-block': 'none'}" data-toggle="tooltip" title="Start Text Chat"
                    class="fa fa fa-wechat {{friend.userId}}-online" (click)="connectTextChat(friend.userId)" style="cursor: pointer;"></i>
                  &nbsp;
                  <i *ngIf="peer" [ngStyle]="{'display': friend?.online ? 'inline-block': 'none'}" data-toggle="tooltip" title="Start Video Call" class="fa fa-video-camera {{friend.userId}}-online"
                    data-backdrop="static" data-keyboard="false" data-toggle="modal" data-target="#myModal"
                    (click)="connectVideoChat(friend.userId)" style="cursor: pointer;"></i>&nbsp;
                    
                    <i *ngIf="peer" [ngStyle]="{'display': friend?.online ? 'inline-block': 'none'}" data-toggle="tooltip" title="Start Audio Call" class="fa fa-phone {{friend.userId}}-online"
                    data-backdrop="static" data-keyboard="false" data-toggle="modal" data-target="#audioCallModal"
                    (click)="connectAudioCall(friend.userId)" style="cursor: pointer;"></i>
                    
                    <span
                    [ngStyle]="{'display': friend?.online ? 'inline-block': 'none'}" id="{{friend.userId}}-online"
                    class="badge badge-success badge-pill {{friend.userId}}-online">&nbsp;</span></h5>
              </div>
            </div>
          </div>

        </div>
      </div>
      <div class="mesgs" *ngIf="conn">
        <div class="msg_history" id="msgHistory" infiniteScroll infiniteScrollDistance="2"
          infiniteScrollThrottle="50" (scrolled)="onScroll()" (scrolledUp)="onUp()" [scrollWindow]="false">


        </div>
        <div class="type_msg">
          <div class="input_msg_write">
            <form [formGroup]="msgForm">
              <input (keypress)="handleSendButton($event)" id="write_msg" type="text" class="write_msg"
                formControlName="msg" placeholder="Type a message" />
            </form>
            <button id="msg_send_btn" class="msg_send_btn" (click)="sendMessage()" type="button"><i
                class="fa fa-paper-plane-o" aria-hidden="true"></i></button>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<div>

</div>







<div class="container">

  <!-- The Modal -->
  <div class="modal fade" id="myModal" #myModal>
    <div class="modal-dialog modal-xl">
      <div class="modal-content">

        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Peer to Peer Video and Voice Call</h4>
          <button type="button" class="btn btn-danger" data-dismiss="modal"><b>End Call</b></button>
          <!-- <button type="button" class="close" data-dismiss="modal">&times;</button> -->
        </div>

        <!-- Modal body -->
        <div class="modal-body" style="text-align: center">
          <div>
            <video controls height="300" #remoteVideo autoplay playsinline></video>&nbsp;&nbsp;&nbsp;
            <video height="200" #localVideo autoplay playsinline></video>
          </div>
        </div>

        <!-- Modal footer -->
        <!-- <div class="modal-footer">
            
          </div> -->

      </div>
    </div>
  </div>


  <!-- The Modal -->
  <div class="modal fade" id="audioCallModal" #audioCallModal>
      <div class="modal-dialog modal-xl">
        <div class="modal-content">
  
          <!-- Modal Header -->
          <div class="modal-header">
            <h4 class="modal-title">Peer to Peer Voice Call</h4>
            <button type="button" class="btn btn-danger" data-dismiss="modal"><b>End Call</b></button>
            <!-- <button type="button" class="close" data-dismiss="modal">&times;</button> -->
          </div>
  
          <!-- Modal body -->
          <div class="modal-body" style="text-align: center">
            <div>
              <audio controls autoplay playsinline #localAudio></audio>
              <audio autoplay playsinline #remoteAudio></audio>
            </div>
          </div>
  
          <!-- Modal footer -->
          <!-- <div class="modal-footer">
              
            </div> -->
  
        </div>
      </div>
    </div>

</div>

<!-- <div class="container">
      <video height="250" #localVideo autoplay playsinline></video>
      <video height="250" id="remote" autoplay playsinline></video>
  </div> -->